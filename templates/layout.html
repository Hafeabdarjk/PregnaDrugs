<!DOCTYPE html>
<html lang="en">
<head>
	<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PregnaDrugs</title>
	<link rel="icon" type="image/x-icon" href="../static/favicon.ico">
	<link rel="Stylesheet" type="text/css" href="../static/stylesheet.css">
	<script>
    function fetchDrugDetails(drugId) {
        var detailsDiv = document.getElementById("details-" + drugId);
        
        // Check if the details are already displayed
        if (detailsDiv.style.display === "block") {
            detailsDiv.style.display = "none";  // Hide details
            return;
        }

        // If the details are not loaded yet, fetch them via AJAX
        if (!detailsDiv.innerHTML.trim()) {
            fetch('/drug_details/' + drugId)
                .then(response => response.json())
                .then(data => {
                    if (data.drug_details) {
                        // Display the drug details
                        detailsDiv.innerHTML = `<p>${data.drug_details}</p>`;
                        detailsDiv.style.display = "block";  // Show details
                    } else {
                        detailsDiv.innerHTML = "<p>No details available for this drug.</p>";
                        detailsDiv.style.display = "block";  // Show message if no details
                    }
                })
                .catch(error => {
                    console.error("Error fetching drug details:", error);
                    detailsDiv.innerHTML = "<p>Failed to load drug details.</p>";
                    detailsDiv.style.display = "block";  // Show error message
                });
        } else {
            detailsDiv.style.display = "block";  // Show details if already fetched
        }
    }
	</script>

</head>
<body>

    <!-- Search Bar at the Top -->
    <div class="search-container">
        <form action="/search" method="GET">
            <input type="text" placeholder="Search pharmacological classes..." name="search">
            <button type="submit">
                <!-- Search Icon (SVG) -->
                <svg viewBox="0 0 512 512">
                    <path d="M505 442.7L405.3 343a208.1 208.1 0 0044.8-126C450 97.2 352.8 0 225 0S0 97.2 0 217s97.2 217 217 217a208.1 208.1 0 00126-44.8l99.7 99.7a21.4 21.4 0 0030.1 0l32.2-32.2a21.4 21.4 0 000-30.1zM217 382c-91.7 0-166-74.3-166-166S125.3 50 217 50s166 74.3 166 166-74.3 166-166 166z"/>
                </svg>
            </button>
        </form>
    </div>

    <!-- Header and Body System Circles -->
	<div class="background-image">
			<div class="content">
				{% block body %}
				{% endblock %}	
			</div>
	</div>

</body>
</html>
